<?xml version="1.0" encoding="UTF-8"?>
<testcase name="wikipedia wordpress comment" xmlns="http://www.jazzteam.org/Routines" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
		  description="Создаем новый пост в блоге, проверяем, что он появился. Оставляем коментарий, проверяем и удаляем коментарий. Удаляем пост" 	
		  tags="Basic, wordpress, import, tinymce">
		  
	<import name="tinymce" resource="tinymce/TinyMceTextPrint.xml" />	  
	 	  
	<test coverage="100" name="01 Создание поста" 
		  description="Заходим на страницу wikipedia, сохраняем текст и вставляем в пост Wordpress" 
		  tags="wikipedia, wordpress, post, navigate, webelement, field, button, frame, variable, pause" >
		
		<navigate to="http://ru.wikipedia.org"/>
		<field id="searchInput" textToType="тестировщик"/>	  
		<button id="searchButton"/>
		
		<webelement xpath="//div[@id='mw-content-text']/p[1]" action="getText" returnValueName="whoIsTester"/> 
		
		<navigate to="http://xml2selenium.com/demowp/"/>
		<webelement xpath="//*[@id='meta-2']//a[@href='http://xml2selenium.com/demowp/wp-login.php']" action="click"/>
		
		<field id="user_login" textToType="admin"/>
		<field id="user_pass" textToType="S|Q0:Vvo3O5C2k5"/>
		<button id="wp-submit"/>
		<pause time="1000"/>
		
		<button xpath="//a[@class='wp-has-submenu wp-not-current-submenu open-if-no-js menu-top menu-icon-post menu-top-first']//div[@class='wp-menu-name']"/>
		<button xpath="//*[@id='wpbody']//a[@class='add-new-h2']"/>
		
		<field id="title" textToType="Кто такой тестировшик"/>
		<button id="content-tmce"/>
		<frame extends="tinymce:tinyMceTextPrint">
			<variable ref="text" value="${whoIsTester}" />
			<variable ref="instance" value="content" />
		</frame>	
		<pause time="3000"/>
		
		<button id="publish"/>
		<pause time="3000"/>
		
		<!-- logout -->
		<webelement xpath="//a[@title='My Account']" action="mouseMove"/>
		<webelement xpath="//li[@id='wp-admin-bar-logout']/a" action="isExists"/>
		<webelement xpath="//li[@id='wp-admin-bar-logout']/a" action="click"/>
		<webelement id="login" action="isExists"/>
	</test>	  
	
	<test coverage="100" name="02 Проверка поста" 
		  description="Проверяем что пост создался" 
		  tags="wordpress, post, navigate, webelement" >
		<navigate to="http://xml2selenium.com/demowp/"/>
		<webelement xpath="//*[@id='content']/article[1]/header[@class='entry-header']/h1[@class='entry-title']/a"
					action="isContainsText" text="Кто такой тестировшик"/>
		<webelement xpath="//article[1]//div[@class='entry-content']" action="isExists"/>			
	</test>
	
	<test coverage="100" name="03 Оставить комментарий" 
		  description="Заходим в пост от имени администратора и оставляем коментарий" 
		  tags="post, comment, navigate, webelement, field, button" >
		<!-- вход в админку -->
		<navigate to="http://xml2selenium.com/demowp/"/>
		<webelement xpath="//*[@id='meta-2']//a[@href='http://xml2selenium.com/demowp/wp-login.php']" action="click"/>
		<pause time="1000"/>
		
		<field id="user_login" textToType="admin"/>
		<field id="user_pass" textToType="S|Q0:Vvo3O5C2k5"/>
		<button id="wp-submit"/>
		<pause time="1000"/>
		
		<!-- переходим на сайт от имени администратора, и оставляем коментарий -->
		<webelement id="wp-admin-bar-site-name" action="mouseMove"/>
		<webelement xpath="//li[@id='wp-admin-bar-site-name']/a[@class='ab-item']" action="click"/>
		
		<webelement xpath="//*[@id='content']/article[1]/header[@class='entry-header']/h1[@class='entry-title']/a"
					action="isContainsText" text="Кто такой тестировшик"/>
					
		<webelement xpath="//*[@id='content']/article[1]/header[@class='entry-header']/h1[@class='entry-title']/a"
					action="click"/>	
		<pause time="3000"/>				
		<field id="comment" textToType="cool!!!"/>
		
		<button id="submit"/>	
		<pause time="3000"/>			
		
		<!-- logout -->
		<webelement xpath="//a[@title='My Account']" action="mouseMove"/>
		<webelement xpath="//li[@id='wp-admin-bar-logout']/a" action="isExists"/>
		<webelement xpath="//li[@id='wp-admin-bar-logout']/a" action="click"/>
		<webelement id="login" action="isExists"/>
	</test>	  
	
	<test coverage="100" name="04 Проверка комментария" 
		  description="Проверяем, что комментарий оставлен и его оставил admin" 
		  tags="post, comment, navigate, webelement" >
		<navigate to="http://xml2selenium.com/demowp/"/>
		
		<webelement xpath="//*[@id='content']/article[1]/header[@class='entry-header']/h1[@class='entry-title']/a"
					action="click" />
		<webelement xpath="//div[@id='comments']//div[@class='comment-author vcard']/b" action="isContainsText" 
					text="admin"/>	
		<webelement xpath="//div[@class='comment-content']/p" action="isContainsText" 
					text="cool!!"/>						
	</test>
	
	<test coverage="100" name="05 Удалить пост" 
		  description="Заходим на страницу администратора и удаляем пост" 
		  tags="navigate, field, button, checkbox, combobox, pause" >
	
		<navigate to="http://xml2selenium.com/demowp/"/>
		<webelement xpath="//*[@id='meta-2']//a[@href='http://xml2selenium.com/demowp/wp-login.php']" action="click"/>
		<pause time="1000"/>
		
		<field id="user_login" textToType="admin"/>
		<field id="user_pass" textToType="S|Q0:Vvo3O5C2k5"/>
		<button id="wp-submit"/>
		<pause time="1000"/>
		
		<button xpath="//a[@class='wp-has-submenu wp-not-current-submenu open-if-no-js menu-top menu-icon-post menu-top-first']//div[@class='wp-menu-name']"/>
		
		<checkbox xpath="//*[@id='the-list']/tr[1]/th[@class='check-column']/input[@type='checkbox']" action="click"/>
		<combobox xpath="//*[@id='posts-filter']//select[@name='action']" by="value" value="trash"/>
		<button id="doaction"/>
		
		<pause time="3000"/>
		
		<!-- logout -->
		<webelement xpath="//a[@title='My Account']" action="mouseMove"/>
		<webelement xpath="//li[@id='wp-admin-bar-logout']/a" action="isExists"/>
		<webelement xpath="//li[@id='wp-admin-bar-logout']/a" action="click"/>
		<webelement id="login" action="isExists"/>
	</test>	  
	
	<test coverage="100" name="06 Проверка поста" 
		  description="Проверяем, что пост удалился" 
		  tags="navigate, webelement" >
		<navigate to="http://xml2selenium.com/demowp/"/>
		<webelement xpath="//*[@id='content']/article[1]/header[@class='entry-header']/h1[@class='entry-title']/a"
					action="isNotExists"/>
	</test>
</testcase>	